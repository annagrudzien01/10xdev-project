---
import Layout from "@/layouts/Layout.astro";
import HeaderPublic from "@/components/public/HeaderPublic";
import HeroSection from "@/components/public/HeroSection";
import ActionsSection from "@/components/public/ActionsSection";
import OrientationNotice from "@/components/public/OrientationNotice";

// Check if user is authenticated on server side
const token = Astro.cookies.get("sb-access-token");
const isAuthenticated = !!token?.value;

// Redirect authenticated users to profiles
if (isAuthenticated) {
  return Astro.redirect("/profiles");
}
---

<Layout title="Rytmik - Gra edukacyjna dla dzieci">
  <div class="min-h-screen flex flex-col bg-gradient-to-b from-background to-muted">
    <!-- Header -->
    <HeaderPublic client:load />

    <!-- Main content -->
    <main class="flex-1">
      <!-- Hero Section -->
      <HeroSection client:load />

      <!-- Actions Section -->
      <ActionsSection client:load />
    </main>

    <!-- Footer spacer -->
    <div class="h-16"></div>

    <!-- Orientation Notice (mobile only) -->
    <OrientationNotice client:load />
  </div>
</Layout>
