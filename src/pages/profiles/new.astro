---
import Layout from "@/layouts/Layout.astro";
import ProfileForm from "@/components/profiles/ProfileForm";

export const prerender = false;

// Check authentication
const supabase = Astro.locals.supabase;
if (!supabase) {
  return Astro.redirect("/login");
}

const {
  data: { user },
} = await supabase.auth.getUser();

if (!user) {
  return Astro.redirect("/login");
}
---

<Layout title="Nowy profil - Muzyczna Podróż">
  <ProfileForm client:load />
</Layout>
